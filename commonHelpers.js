import{S as m,a as u,i as c}from"./assets/vendor-89feecc5.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function o(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerpolicy&&(r.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?r.credentials="include":e.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(e){if(e.ep)return;e.ep=!0;const r=o(e);fetch(e.href,r)}})();const t={searchFormElement:document.querySelector(".search-form"),searchInput:document.querySelector(".search-input"),searchBtn:document.querySelector(".search-btn"),imagesMarkUp:document.querySelector(".images-markup"),loadBtn:document.querySelector(".load-btn")},g="41860696-2902f93b7313ed5ba840414ce",h=40;let f=new m(".small-image-item a"),d="",l;const y=u.create({baseURL:"https://pixabay.com/api/",headers:{"Content-Type":"application/json"}});t.searchFormElement.addEventListener("submit",L);t.loadBtn.addEventListener("click",v);function L(s){s.preventDefault(),l=1,t.imagesMarkUp.innerHTML="",d=t.searchInput.value.toLowerCase(),t.imagesMarkUp.insertAdjacentHTML("beforeend",'<li class="loader-item"><span class="loader"></span></li>'),p()}function k(){t.imagesMarkUp.innerHTML="",c.error({theme:"dark",position:"topRight",maxWidth:"392px",messageSize:"16px",messageLineHeight:"24px",backgroundColor:"#EF4040",messageColor:"#FAFAFB",message:"Sorry, there are no images matching your search query. Please, try again!",progressBarColor:"#B51B1B"})}function b(s){t.imagesMarkUp.innerHTML="",t.loadBtn.classList.add("hidden"),c.error({theme:"dark",position:"topRight",maxWidth:"392px",messageSize:"16px",messageLineHeight:"24px",backgroundColor:"#EF4040",messageColor:"#FAFAFB",message:`Something went wrong:: ${s}`,progressBarColor:"#B51B1B"})}function B(s){if(t.imagesMarkUp.childNodes.length>=s){t.loadBtn.classList.add("hidden"),t.imagesMarkUp.insertAdjacentHTML("beforeend",`<p class="limit-message">We're sorry, but you've reached the end of search results.</p>`);return}}function M(s){document.querySelector(".loader-item").remove();const a=s.hits.reduce((o,i)=>o+`<li class="small-image-item"><a href="${i.largeImageURL}"><img src="${i.webformatURL}" class="small-image" alt="${i.tags}" /></a><ul class="description-image-list"><li class="description-image-item"><p class="description-title">Likes</p><p class="description-value">${i.likes}</p></li>
          <li class="description-image-item"><p class="description-title">Views</p><p class="description-value">${i.views}</p></li>
          <li class="description-image-item"><p class="description-title">Comments</p><p class="description-value">${i.comments}</p></li>
          <li class="description-image-item"><p class="description-title">Downloads</p><p class="description-value">${i.downloads}</p></li></ul></li>`,"");t.imagesMarkUp.insertAdjacentHTML("beforeend",a),B(s.totalHits),f.refresh()}async function v(){l+=1,t.imagesMarkUp.insertAdjacentHTML("beforeend",'<li class="loader-item"><span class="loader"></span></li>'),await p(),window.scrollBy({top:document.querySelector(".small-image-item").getBoundingClientRect().height*2,left:0,behavior:"smooth"})}async function p(){t.loadBtn.classList.add("hidden");try{const a=await(await y.get(`?key=${g}&q=${d}&image-type=photo&orientation=horizontal&safesearch=true&page=${l}&per_page=${h}`)).data;if(a.hits.length<=0){k();return}t.loadBtn.classList.remove("hidden"),M(a)}catch(s){b(s.message)}}
//# sourceMappingURL=commonHelpers.js.map
